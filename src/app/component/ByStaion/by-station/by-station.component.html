<div class="container mt-4">

   <div class="breadcrumb mb-3">
  <a href="#" class="text-muted text-decoration-none" (click)="goBack()" *ngIf="selectedLine">
    ðŸš‡ Metro Lines
  </a>
  <span *ngIf="!selectedLine" class="text-muted">ðŸš‡ Metro Lines</span>

  <ng-container *ngIf="selectedLine">
    <span class="mx-1 text-muted">â€º</span>

    <!-- If station is selected, line name should be clickable -->
    <a *ngIf="selectedStation" href="#" class="text-muted text-decoration-none" (click)="onBackToLine()">
      {{ selectedLine.line_name }}
    </a>
    <span *ngIf="!selectedStation" class="fw-semibold">{{ selectedLine.line_name }}</span>
  </ng-container>

  <ng-container *ngIf="selectedStation">
    <span class="mx-1 text-muted">â€º</span>
    <span class="fw-semibold">{{ selectedStation?.name || selectedStation }}</span>
  </ng-container>
</div>



  <!-- <h5 class="mb-3"><strong>ðŸš‡ Search Lines</strong></h5> -->

  <div class="metro-search" *ngIf="!selectedLine">
  <input
    type="text"
    placeholder="Search by station..."
    [(ngModel)]="searchQuery"
  />
</div>
<div *ngIf="!selectedLine" class="metro-lines-scroll">
    <div *ngFor="let line of filteredLineFilter()" class="metro-line mb-3 p-3 rounded shadow-sm"
        [ngStyle]="{ 'border-left': '5px solid ' + getLineColor(line.line_name) }">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center">
        <div class="metro-line-name fw-bold">
            <span [style.color]="getLineColor(line.line_name)">â—™</span>
            <ng-container *ngIf="line.status === 'AC'; else plainLineName">
                <a href="#" (click)="onLineClick(line)" class="text-decoration-none text-dark">
                {{ line.line_name }}
                </a>
            </ng-container>
            <ng-template #plainLineName>
                {{ line.line_name }}
            </ng-template>
        </div>
        <div class="metro-line-status mt-2 mt-md-0" [ngClass]="getStatusColor(line.status)">
            {{ getFullStatus(line.status) }}
        </div>
        <div class="metro-line-terminals text-primary mt-2 mt-md-0">
        {{ line.stations[0] }} â‡„ {{ line.stations[line.stations.length - 1] }}
        </div>
    </div>
    </div>
  </div>
   <!-- Line detail (when a line is selected but no station is selected) -->
<app-metro-line-detail
  *ngIf="selectedLine && !selectedStation"
  [line]="selectedLine"
  (stationClick)="onStationClick($event)">
</app-metro-line-detail>

<!-- Station detail (when a station is selected) -->
<app-metro-station-detail
  *ngIf="selectedStation"
  [station]="selectedStation"
  [lineName]="selectedLine.line_name">
</app-metro-station-detail>
</div>
